<script>
  const cookieKey = 'mazeofdragons_cookie_count';
  const visitedPagesKey = 'mazeofdragons_visited_pages';

  try {
    let count = localStorage.getItem(cookieKey);
    count = count ? parseInt(count, 10) : 0;

    let visited = localStorage.getItem(visitedPagesKey);
    visited = visited ? JSON.parse(visited) : [];

    const currentPage = location.pathname;

    // Always add +1 per page view
    count += 1;

    // If first time visiting this unique page, add bonus +100
    if (!visited.includes(currentPage)) {
      count += 100;
      visited.push(currentPage);
      localStorage.setItem(visitedPagesKey, JSON.stringify(visited));
    }

    localStorage.setItem(cookieKey, count);
    document.getElementById('counter').textContent = `üç™ Cookies Collected: ${count}`;
  } catch (e) {
    document.getElementById('counter').textContent = 'üç™ Error: Cookies disabled or unsupported';
    console.error('Cookie counter error:', e);
  }
</script>
